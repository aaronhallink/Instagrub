/*! Instagrub 2014-04-03 */
function api(){return window.sharedAPI?window.sharedAPI:this instanceof api?void 0:window.sharedAPI=new api}function showError(){document.getElementById("form_error_msg").style.display="block"}function validateForm(){delete window.error_msg;var a='<h4 style="font-size:16px;">The following errors occurred while processing your submission. Please make the following corrections to finish your submission.</h4>',b=document.forms.reg_form.name.value,c=document.forms.reg_form.email.value,d=document.forms.reg_form.pass1.value,e=document.forms.reg_form.pass2.value,f="<?php echo $_GET['dup']; ?>";return console.log(f),null==c||""==c||null==b||""==b||null==d||""==d||null==e||""==e||d!==e||1==f?((null==b||""==b)&&(a+='<p>The field "Your Name" was left blank.</p>'),(null==c||""==c)&&(a+='<p>The field "Your Email" was left blank.</p>'),(null==d||""==d)&&(a+='<p>The field "Password 1" was left blank.</p>'),(null==e||""==e)&&(a+='<p>The field "Password 2" was left blank.</p>'),d!==e&&(a+="<p>Your passwords did not match.</p>"),1==f&&(a+="<p>Your email is already in use.</p>"),showError(),document.getElementById("form_error_msg").innerHTML=a,!1):!0}function displayIngredient(){var a=document.getElementById("query").value;if(checkIngredient(a))return void alert("You already entered that!");if(""!=a){for(a=a.split(" ").join("+"),ingredients.push(a),output="",i=0;i<ingredients.length;i++)output+="<span style='float:left;'>"+(ingredients[i].split("+").join(" ")+"</span><span onClick='removeIngredient("+i+")' style='float:right;'>[X]</span><br/>");document.getElementById("input_target").innerHTML=output,document.getElementById("query").value=""}else alert("Enter an ingredient!"),document.getElementById("input_target").innerHTML=output}function removeIngredient(a){for(i=0;i<ingredients.length;i++)if(a==i)for(ingredients.splice(i,1),output="",i=0;i<ingredients.length;i++)output+="<span style='float:left;'>"+(ingredients[i].split("+").join(" ")+"</span><span onClick='removeIngredient("+i+")' style='float:right;'>[X]</span><br/>");document.getElementById("input_target").innerHTML=output}function checkIngredient(a){for(i=0;i<ingredients.length;i++)if(ingredients[i]==a)return!0;return!1}function recurse(a,b,c){if(c||(c=[]),0==a.length)return b(c);var d=a.pop();api().searchRecipe(d,function(d){c.push(d),recurse(a,b,c)})}function search(){var a=document.getElementById("my_ingredients");console.log(ingredients),ingredients=a.innerHTML.replace(/\n|<.*?>/g,"").split(" ").join("+").split("[X]"),console.log(ingredients),recipeSearch()}function recipeSearch(){showImage();for(var a=document.getElementById("filter"),b=a.options[a.selectedIndex].value,c=new Array,d=0;d<ingredients.length;d++)c.push(ingredients[d]);recurse(c,function(a){if(console.log(a),1==check)for(;document.getElementById("results_target").hasChildNodes();)document.getElementById("results_target").removeChild(document.getElementById("results_target").lastChild);for(var c=new Array,d=new Array,e=new Array,f=0;6>f;f++){var g=new Array;e.push(g)}for(var h=0,f=0;f<a.length;f++)for(var i=0;i<a[f].matches.length;i++){var j=0;10>h&&console.log(a[f].matches[i].id);for(var k=0;k<a[f].matches[i].ingredients.length&&(10>h&&console.log(ingredients.indexOf(a[f].matches[i].ingredients[k].split(" ").join("+"))),!(ingredients.indexOf(a[f].matches[i].ingredients[k].split(" ").join("+"))<0&&(j++,j>5)));k++);h++,6>j&&-1==d.indexOf(a[f].matches[i].id)&&(e[j].push(a[f].matches[i]),d.push(a[f].matches[i].id))}for(var f=0;6>f;f++)for(var i=0;i<e[f].length;i++)c.push(e[f][i]);updateMatches(),"preptime"==b?prepSort(c):"rating"==b&&rateSort(c);for(var f=0;f<c.length;f++){var l=new Image(100,100),m=new Image(100,16),n=c[f].rating;m.src=0==n?"../images/rating_00.jpg":1==n?"../images/rating_10.jpg":2==n?"../images/rating_20.jpg":3==n?"../images/rating_30.jpg":4==n?"../images/rating_40.jpg":5==n?"../images/rating_50.jpg":"../images/rating_05.jpg",l.src=c[f].smallImageUrls[0],l.border=1;var o,p=document.createTextNode(c[f].recipeName),q=document.createTextNode(c[f].id);o=document.createTextNode(null==c[f].totalTimeInSeconds?"Not Available":c[f].totalTimeInSeconds/60);var r="http://www.yummly.com/recipe/external/",s=(r.concat(q),document.createElement("a"));s.appendChild(l),r+=String(c[f].id),s.href=r,s.target="_blank";{var t="Ingredients:\n";document.createTextNode(t)}document.getElementById("results_target").appendChild(s),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(p),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(document.createTextNode("Ingredients:")),document.getElementById("results_target").appendChild(document.createElement("br"));for(var i=0;i<c[f].ingredients.length;i++)document.getElementById("results_target").appendChild(document.createTextNode(i+1+". "+c[f].ingredients[i])),document.getElementById("results_target").appendChild(document.createElement("br"));document.getElementById("results_target").appendChild(document.createTextNode("Preparation Time in minutes:")),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(o),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(document.createTextNode("Rating:")),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(m),document.getElementById("results_target").appendChild(document.createElement("br")),document.getElementById("results_target").appendChild(document.createElement("br"))}update()})}function update(){return check=1,hideImage(),check}function updateMatches(){checkMatches=1}function showImage(){document.getElementById("Tomato").style.display="block",document.getElementById("Tomato").style.visibility="visible"}function hideImage(){document.getElementById("Tomato").style.display="none",document.getElementById("Tomato").style.visibility="hidden"}function prepSort(a){a.sort(function(a,b){return null==a.totalTimeInSeconds?a.totalTimeInSeconds+1e9-b.totalTimeInSeconds:null==b.totalTimeInSeconds?a.totalTimeInSeconds-(b.totalTimeInSeconds+1e9):a.totalTimeInSeconds-b.totalTimeInSeconds})}function rateSort(a){a.sort(function(a,b){return b.rating-a.rating})}jQuery(document).ready(function(){}),api.prototype.searchRecipe=function(a,b){{var c="../backend.php?q=search&p=";$.getJSON(c,{p:a},b)}},api.prototype.getRecipe=function(a,b){{var c="../backend.php?q=get&p=";$.getJSON(c,{p:a},b)}};var output="",querySearch="",ingredients=new Array,i,recipes=new Array,check=0,checkMatches=0,checkRecipeList=0,recipeList=new Array,prepArray=new Array;